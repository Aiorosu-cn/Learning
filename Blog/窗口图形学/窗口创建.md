[TOC]

# 窗口和win32程序的区别

创建win32程序后,在链接器-系统-子系统中,显示类型是控制台,当把类型设置成窗口后,再去编译就会发生问题,报错少了个winmain函数
原因是:
> 窗口程序段额入口函数是WinMain/wWinMain 函数
> 控制台的入口函数是main 函数
> 

```cpp
int CALLBACK WinMain(
	HINSTANCE	hInstance,	//	实例句柄
	HINSTANCE	hPervInstance,	//前实例句柄
	LPSTR	lpCmdLine,//命令行文本
	int nCmdShow)	//	窗口初始化状态选项
)
```
- 实例句柄是程序运行起来后,系统给程序的编号
- 前实例句柄是历史遗留问题,现在一直为0
- 命令行和控制台不一样,这里将所有命令行参数合并成一个字符串传给你,如果你要解析参数,还需要自己解析,这里分隔不一定是空格
- 初始化状态有对应的数字,可以查看文档填写
- CALLBACK是调用约定

> 可以在VS-首选项-命令行参数中,设置程序运行的参数

# 调用约定
规定了参数传入时的顺序以及栈内存的释放责任,变量存储位置等内容
|            | 入参顺序 |      |
| ---------- | -------- | ---- |
| __stdcall  | 右到左   |      |
| __cdecl    |          |      |
| __fastcall |          |      |

举例

```cpp
int a = 1;
printf("%d,%d,%d,%d,%d",++a,a++,++a,a++,++a);
//占位 a4a2a,最后a为6,那么结果是64626
```

应用场景

当和其他人代码配合时,如果电泳的顺序不同,可能会导致错误

# 窗口创建过程
```cpp
hIcon = LoadIcon(hInstance,MAKEINTRESOURCE(IDI_ICON1)) //从资源文件转换为内存文件
//背景的类型是一个画刷,系统有提供一个默认的,也可以自己创建

```
右键添加资源
这些资源都会被rc.exe的程序编译进来
导入资源文件后,resource.h头文件就会自动把资源的ID显示出来,这个头文件一定不要手动乱改,让他自动生成


## 创建icon或者cursor,图标和光标
使用工具icofx
如果你希望没有边缘的话,要把边缘处理成透明的,使用ps处理
把光标存储好,在用软件里新建光标
在资源里添加资源
每次加资源会重新建一个resource.h头文件
导入后