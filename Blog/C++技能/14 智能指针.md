[TOC]

为了避免忘记释放指针

大公司代码不是你一个人写的，

UE4的智能指针和C++不同

# 纯C++智能指针

包含的成员变量：

- 包含一个模板类型的指针

- 引用记数,这个指针被用过多少次

包含的成员函数

- 析构要等记数为0了，才真正释放内存

# 智能指针的类型

## 独占指针 unique_ptr

特点：

- 保证同一时空，保证只能有一个指针指向这块内存

- 无法拷贝构造和同类赋值，但是有move函数

  release  释放指针

  reset(新内存)，释放旧的内存，并指向新的内存

## 共享指针 shared_ptr

多个改类型的只能指针对象共享使用一个堆内存

特点

- 支持拷贝和赋值

释放 reset(),退出管理，实际是减一个计数

unique(),显示是否只有1个

use_count(),获取当前引用计数

swap(),相同共享指针类型之间交换内存

get(), 获取原始指针，不会改变计数

为了安全使用共享指针，最好使用 `make_shared`初始化

```cpp
shared_ptr<int> sp5 = make_shared<int>(789);
```



## 弱指针 weak_ptr

为了解决共享指针互相嵌套循环引用的情况







