[toc]

把武器导出到项目中

# 骨骼绑定武器

## 骨骼视图预览动画

- 在骨骼视图,可以预览动画
- 右键插槽,可以添加资源预览;
- 调整socket让预览正确;

## 人物蓝图添加骨骼动画

- 组件添加一个skeletalMesh在Mesh下
- 选择自己添加的武器的套接字
- 在skeletalMesh 的 mesh选择一个武器;
- 把枪的transform归零;





# 人物添加动画

## 动画的种类与创建

UE Animation的动画种类介绍

### ami offset & ami offset  1D

专门用于FPS,叫做瞄准偏移,让移动鼠标时,身体不动,只抬手或者压下手臂



### 动画蓝图

用于控制动画的执行逻辑,控制骨骼的运动



### Animation composite组合动画

多个动作打个包,只有相同的骨骼的动画可以组合到一起

视图中下面可以组合动画

- 如果只拖一个动作和其他动画没有区别;
- 例如可以换弹夹+射击动画组合到一起;
- 可以加一个notifies,遇到一个事情,可以播放这个动画;

### animation layer interface 动画层级接口

动画很复杂的时候,把动画分解到各个层级做

### animation montage 动画剪辑

可以把动画进行切片组合,可以改变播放的顺序

### animation ssharing setup 共享动画

理论一个模型一个动画,如果群体动画可以使用,多个目标使用用一套动画



### blend space & blend space 1D 混合动画&混合动画1D

和unity融合树有点像,把不同的动作拖到一起,通过插值就混合动画

### bonecompression settings

优化骨骼用的

### cameraanimationsequence

过场动画用的

###  paper filipbook

做2D动画做的



### Pose asset 

 姿势资源,做骨骼重定向会用到



### template seequence

过场动画做的





# 用1D混合创建动画资源

## 创建混合动画1D

- 创建需要选择对应的骨骼
- 下面有几条线的区域就叫做混合空间,来源于左边的轴设置- number of grid dievisions,把区域分成多个格子;
- 把右边的动画资源拖入混合空间;
- 绿色是我们当前参数;
- 给horizontal 做参数设置,包括名字,最大最小,插值方式
- 还可以给当前动画叠加一个动画

## 混合动画放到动画蓝图执行

- 创建的混合动画资源就可以当一个单独的动画来添加到动画蓝图里;

> 混合动画有线程不安全的问题,最好的办法是不在动画视图里面写代码

| try get pawn owner |      | 获取动画的角色 |
| ------------------ | ---- | -------------- |
| get velocity       |      | 获取3D速度     |
| VectorlengthXy     |      | 水平速度大小   |



# 2D混合空间

- 绿色的点代表xy坐标
- 通过参数可以把动画进行转换



# 状态机

- 在动画蓝图中,添加状态机,有一个入口;
- 把动画放到状态机里,就是一个个动画片段;
- 每个动画分为内外2个部分
  - 内部点击可以看状态开始的事件,事件是通过名字广播的;
  - 外面可以拖出一个指向;
- 双击动画,可以进入动画,还可以拖入动画,根据条件来设置播放的逻辑,比如循环和转换;
  - 起跳动画不需要循环;
  - 双击`转换符号`可以编辑转换条件;
  - 必须让转换条件为真,动画才能转换到下一个动画;



## 切换状态机和普通动画

- 设置一个bool变量;
- 使用节点blend pose by bool 或者 blend pose by int;



| blend pose by bool |      | 混合动画的方法之一 |
| ------------------ | ---- | ------------------ |
| blend pose by int  |      | 混合动画的方法之一 |



状态机和1D的区别是状态机动画是硬切



# 角色行为和动画关联

| jump            |      | 角色跳跃,UE内置的 |
| --------------- | ---- | ----------------- |
| event on jumped |      | 跳跃开始          |
| event on landed |      | 跳跃结束          |
| is valid`       |      | 判断是否获取为空  |

- 把人物蓝图事件传到动画中,可以用发报机;
- 动画的事件视图,拿到角色后,可以`cast to `角色;
- 绑定发报机事件;



# 蒙太奇做动画

- 和组合动画一样编排一个组合动画
- 在section 区域 创建3个section,代表把蒙太奇切成了default ,1,2,3这4段动画
- 默认播放就会播放default
- 如果要播放1-3-2这样播放,在右边进行编辑.
- 还可以在代码里指定播放蒙太奇的哪一段;
- 蒙太奇的solt不是自动播放的,需要代码播放;

| play Anim mentage           |      | 播放蒙太奇,可以指定切片 |
| --------------------------- | ---- | ----------------------- |
| montage play(mesh)          |      |                         |
| montage play(skeletal mesh) |      |                         |
| Montage Play                |      | 播放蒙太奇              |
| Montage Stop                |      | 停止蒙太奇              |

蒙太奇的代码层级比较高,会覆盖其他动画00