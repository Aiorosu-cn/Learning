[TOC]

[3D骨骼动画(一):原理 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/349274838)

# 骨骼

- 数学上骨骼是有变换矩阵来描述的；
  - 当我们对骨骼编辑动画时，附加的皮肤也会相应地实现动画，以反映骨骼的当前姿势。
- 骨骼矩阵是以树状方式存储的
  - **Mat(手部) = Mat(手部局部变换) \* Mat(前臂局部变换) \* Mat(上臂局部变换)**
- 显示的骨骼可以视为骨骼矩阵的单位向量

​	



# 蒙皮即是角色的网格

骨骼与蒙皮的关系即是骨骼与角色网格(模型顶点)的关系。

要想让骨骼的运动影响蒙皮，那就需要把蒙皮与骨骼放置在同一参考坐标系中，而影响的过程就是把网格顶点与对应骨骼的Bone Sapce坐标系对应，使得骨骼的变换能直接影响对应的蒙皮(即网格顶点)。这种技术也叫做**Rigid Body Animation**。

## **顶点混合(Vertex Blending)**

蒙皮网格是连续的，关节附近的顶点似乎同时受到上臂和前臂的影响;换句话说，关节附近顶点的位置是由上臂与前臂两个骨骼同时影响的结果，数学概念称为加权平均值，这一概念是**顶点混合(Vertex Blending)**算法的核心思想，也就是说，部分皮肤可能受到不止单一骨骼的影响。建模人员常称它们为**权重**。



## **Offset Transform**, 

骨架中的每根骨骼都有一个对应的**Offset Matrix**，Offset Matrix指的是蒙皮网格顶点绑定到骨骼时，从绑定空间到相应的骨骼空间(**Bone Space**)的变换矩阵。绑定空间指的是角色网格在应用任何骨骼变换之前的默认姿势(坐标空间)(也就是此时Bone Matrix为identify)，比如**T-Pose。**